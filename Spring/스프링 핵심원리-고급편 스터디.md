## 스터디
이름 : 스프링 핵심원리 고급편 <br>
기간 : 2023.04.01 ~ <br>
참고 강의 : https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B3%A0%EA%B8%89%ED%8E%B8/dashboard <br>
<br>
<br>

### 1주차 
로그 추적기, 파라미터로 로그 추적기 동기화 개발 추가 <br>
트랜잭션 ID, level => traceId 로 전달 <br>
TOBE - 파라미터 동기화로 코드수정 증가 -> <br>
HTTP 요청 구분을 위한 TraceId 동기화, controllerX 호출 시 넘길 파라미터 X <br>
<br>
<br>

### 2주차 
로그 동기화 <br>
traceIdHolder실제 서비스 배포 했을 때 동시성 문제가 생긴다. -> 트랜잭션 아이디 동일하거나 레벨이 안맞음   <br>
객체의 인스턴스가 애플리케이션에 하나만 존재해서 traceHolder 필드를 여러 쓰레드가 동시 접근  <br>
주로 트래픽이 많을 때 자주 발생하고, 스프링 빈 처럼 싱글톤 객체 필드 변경 시 발생, 지역변수에서는 발생 X  <br>
싱글톤 사용할때 동시성 문제 해결 시 해당 쓰레드만 접근 가능한 저장소인 ThreadLocal 사용 <br>
ThreadLocal 은 각 thread 마다 별도의 내부 저장소에 저장. <br>
※ WAS(톰캣) 처럼 쓰레드풀 사용할 때 쓰레드가 그전 쓰레드에 할당이 되면 타인 정보를 조회 가능하고 메모리 누수 문제로 remove 는 필수. <br>
* 쓰레드풀 : 병렬작업 처리 시 사용되는 스레드 갯수를 제한하여 작업 큐에서 가져와 하나씩 처리하는 디자인 패턴.  <br>
생성할 때 마다 비용 발생이 커서 쓰레드 풀을 사용 <br>
 <br>

템플릿 메서드 <br>
로그추적기를 달면 소스가 복잡해져서 변하지않는 로그추적이랑 변하는 비지니스 로직을 분리해서 모듈화하기 위해 템플릿 메서드 사용. <br>
부모클래스에 변하지 않는 템플릿 코드를 두고, 변하는 부분은 자식클래스에 두고 상속과 오버라이딩을 사용해서 처리.  <br>
<br>
